import{f as re,b as Z}from"../chunks/lNKhiqka.js";import{o as Le}from"../chunks/BQQlCHFd.js";import{ao as Ie,s as ae,b as oe,f as Re,g as $,B as Me,G as Oe,o as X,D as x,j as Be,p as De,P as b,a9 as Ne,a0 as We,a1 as ke,a2 as se,n as K,t as F,v as Fe,a3 as ve,C as pe,a4 as Ue,ap as J,z as ye,aq as Ge,ae as He,ar as _e,as as ze,at as Pe,y as je,au as Ve,K as qe,av as Ye,aw as Xe,k as Ke,i as he,e as Je,u as Qe,ax as Ze,ay as $e,az as en,aA as nn,aB as tn,aC as rn,E as me,U as ee,F as Se,W as D,V as U,al as M,ac as Q,ad as O,X as H,an as z}from"../chunks/D0Q986MZ.js";import{b as an}from"../chunks/BazKPOQk.js";import{d as on,s as sn}from"../chunks/RDn6RVdL.js";function _n(n,e,t,r=!0){r&&t();for(var i of e)n.addEventListener(i,t);Ie(()=>{for(var a of e)n.removeEventListener(a,t)})}function cn(n){var e=Re,t=$;ae(null),oe(null);try{return n()}finally{ae(e),oe(t)}}function fn(n,e){return e}function un(n,e,t,r){for(var i=[],a=e.length,o=0;o<a;o++)Pe(e[o].e,i,!0);var s=a>0&&i.length===0&&t!==null;if(s){var u=t.parentNode;je(u),u.append(t),r.clear(),A(n,e[0].prev,e[a-1].next)}Ve(i,()=>{for(var v=0;v<a;v++){var c=e[v];s||(r.delete(c.k),A(n,c.prev,c.next)),qe(c.e,!s)}})}function ln(n,e,t,r,i,a=null){var o=n,s={flags:e,items:new Map,first:null};{var u=n;o=x?X(Be(u)):u.appendChild(Me())}x&&De();var v=null,c=!1,p=Ne(()=>{var f=t();return he(f)?f:f==null?[]:ye(f)});Oe(()=>{var f=b(p),w=f.length;if(c&&w===0)return;c=w===0;let d=!1;if(x){var T=We(o)===ke;T!==(w===0)&&(o=se(),X(o),K(!1),d=!0)}if(x){for(var h=null,g,y=0;y<w;y++){if(F.nodeType===8&&F.data===Fe){o=F,d=!0,K(!1);break}var R=f[y],E=r(R,y);g=xe(F,s,h,null,R,E,y,i,e,t),s.items.set(E,g),h=g}w>0&&X(se())}x||dn(f,s,o,i,e,r,t),a!==null&&(w===0?v?ve(v):v=pe(()=>a(o)):v!==null&&Ue(v,()=>{v=null})),d&&K(!0),b(p)}),x&&(o=F)}function dn(n,e,t,r,i,a,o){var s=n.length,u=e.items,v=e.first,c=v,p,f=null,w=[],d=[],T,h,g,y;for(y=0;y<s;y+=1){if(T=n[y],h=a(T,y),g=u.get(h),g===void 0){var R=c?c.e.nodes_start:t;f=xe(R,e,f,f===null?e.first:f.next,T,h,y,r,i,o),u.set(h,f),w=[],d=[],c=f.next;continue}if(gn(g,T,y),(g.e.f&J)!==0&&ve(g.e),g!==c){if(p!==void 0&&p.has(g)){if(w.length<d.length){var E=d[0],m;f=E.prev;var l=w[0],W=w[w.length-1];for(m=0;m<w.length;m+=1)ce(w[m],E,t);for(m=0;m<d.length;m+=1)p.delete(d[m]);A(e,l.prev,W.next),A(e,f,l),A(e,W,E),c=E,f=W,y-=1,w=[],d=[]}else p.delete(g),ce(g,c,t),A(e,g.prev,g.next),A(e,g,f===null?e.first:f.next),A(e,f,g),f=g;continue}for(w=[],d=[];c!==null&&c.k!==h;)(c.e.f&J)===0&&(p??(p=new Set)).add(c),d.push(c),c=c.next;if(c===null)continue;g=c}w.push(g),f=g,c=g.next}if(c!==null||p!==void 0){for(var k=p===void 0?[]:ye(p);c!==null;)(c.e.f&J)===0&&k.push(c),c=c.next;var Te=k.length;if(Te>0){var Ae=s===0?t:null;un(e,k,Ae,u)}}$.first=e.first&&e.first.e,$.last=f&&f.e}function gn(n,e,t,r){Ge(n.v,e),n.i=t}function xe(n,e,t,r,i,a,o,s,u,v){var c=(u&Ye)!==0,p=(u&Xe)===0,f=c?p?He(i):_e(i):i,w=(u&ze)===0?o:_e(o),d={i:w,v:f,k:a,a:null,e:null,prev:t,next:r};try{return d.e=pe(()=>s(n,f,w,v),x),d.e.prev=t&&t.e,d.e.next=r&&r.e,t===null?e.first=d:(t.next=d,t.e.next=d.e),r!==null&&(r.prev=d,r.e.prev=d.e),d}finally{}}function ce(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,i=e?e.e.nodes_start:t,a=n.e.nodes_start;a!==r;){var o=Ke(a);i.before(a),a=o}}function A(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function bn(n,e){return n==null?null:String(n)}function wn(n,e,t,r){var i=n.__style;if(x||i!==e){var a=bn(e);(!x||a!==n.getAttribute("style"))&&(a==null?n.removeAttribute("style"):n.style.cssText=a),n.__style=e}return r}function ne(n,e,t){if(n.multiple){if(e==null)return;if(!he(e))return Ze();for(var r of n.options)r.selected=e.includes(fe(r));return}for(r of n.options){var i=fe(r);if($e(i,e)){r.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function vn(n,e){let t=!0;Je(()=>{e&&ne(n,Qe(e),t),t=!1;var r=new MutationObserver(()=>{var i=n.__value;ne(n,i)});return r.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function fe(n){return"__value"in n?n.__value:n.value}const pn=Symbol("is custom element"),yn=Symbol("is html");function q(n,e,t,r){var i=hn(n);x&&(i[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="loading"&&(n[en]=t),t==null?n.removeAttribute(e):typeof t!="string"&&mn(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function hn(n){return n.__attributes??(n.__attributes={[pn]:n.nodeName.includes("-"),[yn]:n.namespaceURI===nn})}var ue=new Map;function mn(n){var e=ue.get(n.nodeName);if(e)return e;ue.set(n.nodeName,e=[]);for(var t,r=n,i=Element.prototype;i!==r;){t=rn(r);for(var a in t)t[a].set&&e.push(a);r=tn(r)}return e}function le(n,e){_n(window,["resize"],()=>cn(()=>e(window[n])))}let _;const Ee=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Ee.decode();let G=null;function j(){return(G===null||G.byteLength===0)&&(G=new Uint8Array(_.memory.buffer)),G}function S(n,e){return n=n>>>0,Ee.decode(j().subarray(n,n+e))}function L(n){const e=_.__externref_table_alloc();return _.__wbindgen_export_2.set(e,n),e}function C(n,e){try{return n.apply(this,e)}catch(t){const r=L(t);_.__wbindgen_exn_store(r)}}let N=0;const V=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Sn=typeof V.encodeInto=="function"?function(n,e){return V.encodeInto(n,e)}:function(n,e){const t=V.encode(n);return e.set(t),{read:n.length,written:t.length}};function Y(n,e,t){if(t===void 0){const s=V.encode(n),u=e(s.length,1)>>>0;return j().subarray(u,u+s.length).set(s),N=s.length,u}let r=n.length,i=e(r,1)>>>0;const a=j();let o=0;for(;o<r;o++){const s=n.charCodeAt(o);if(s>127)break;a[i+o]=s}if(o!==r){o!==0&&(n=n.slice(o)),i=t(i,r,r=o+n.length*3,1)>>>0;const s=j().subarray(i+o,i+r),u=Sn(n,s);o+=u.written,i=t(i,r,o,1)>>>0}return N=o,i}let I=null;function P(){return(I===null||I.buffer.detached===!0||I.buffer.detached===void 0&&I.buffer!==_.memory.buffer)&&(I=new DataView(_.memory.buffer)),I}function B(n){return n==null}const de=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>{_.__wbindgen_export_5.get(n.dtor)(n.a,n.b)});function ge(n,e,t,r){const i={a:n,b:e,cnt:1,dtor:t},a=(...o)=>{i.cnt++;const s=i.a;i.a=0;try{return r(s,i.b,...o)}finally{--i.cnt===0?(_.__wbindgen_export_5.get(i.dtor)(s,i.b),de.unregister(i)):i.a=s}};return a.original=i,de.register(a,i,i),a}function te(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const i=n.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){const i=n.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(n)){const i=n.length;let a="[";i>0&&(a+=te(n[0]));for(let o=1;o<i;o++)a+=", "+te(n[o]);return a+="]",a}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t&&t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}function xn(n){_.engineInit(n)}function En(n){_.engineSetDimension(n)}function Cn(n){const e=Y(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=N;_.engineSetBoardColor(e,t)}function Tn(n){const e=Y(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=N;_.engineSetBoardSet(e,t)}function An(){const n=_.engineGetSettings();return ie.__wrap(n)}function Ln(){return _.engineGetBoardSetPresets()}function In(){return _.engineGetBoardColorPresets()}function Rn(n){_.engineAddOnChangeListener(n)}function Mn(n,e,t){_.closure21_externref_shim(n,e,t)}function On(n,e){_._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h856a627b2fa6bec1(n,e)}const be=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_engineinfo_free(n>>>0,1));class ie{static __wrap(e){e=e>>>0;const t=Object.create(ie.prototype);return t.__wbg_ptr=e,be.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,be.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_engineinfo_free(e,0)}get board_set(){let e,t;try{const r=_.engineinfo_board_set(this.__wbg_ptr);return e=r[0],t=r[1],S(r[0],r[1])}finally{_.__wbindgen_free(e,t,1)}}get board_color(){let e,t;try{const r=_.engineinfo_board_color(this.__wbg_ptr);return e=r[0],t=r[1],S(r[0],r[1])}finally{_.__wbindgen_free(e,t,1)}}}async function Bn(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function Dn(){const n={};return n.wbg={},n.wbg.__wbg_addColorStop_165045339ad89f05=function(){return C(function(e,t,r,i){e.addColorStop(t,S(r,i))},arguments)},n.wbg.__wbg_addEventListener_90e553fdce254421=function(){return C(function(e,t,r,i){e.addEventListener(S(t,r),i)},arguments)},n.wbg.__wbg_arc_c0ea16371fccfef1=function(){return C(function(e,t,r,i,a,o){e.arc(t,r,i,a,o)},arguments)},n.wbg.__wbg_beginPath_0198cb08b8521814=function(e){e.beginPath()},n.wbg.__wbg_call_672a4d21634d4a24=function(){return C(function(e,t){return e.call(t)},arguments)},n.wbg.__wbg_createLinearGradient_d9f235a84f77b603=function(e,t,r,i,a){return e.createLinearGradient(t,r,i,a)},n.wbg.__wbg_createObjectURL_6e98d2f9c7bd9764=function(){return C(function(e,t){const r=URL.createObjectURL(t),i=Y(r,_.__wbindgen_malloc,_.__wbindgen_realloc),a=N;P().setInt32(e+4*1,a,!0),P().setInt32(e+4*0,i,!0)},arguments)},n.wbg.__wbg_currentTarget_6f3494de6b6d7897=function(e){const t=e.currentTarget;return B(t)?0:L(t)},n.wbg.__wbg_drawImage_c8968fd5fac937f5=function(){return C(function(e,t,r,i,a,o){e.drawImage(t,r,i,a,o)},arguments)},n.wbg.__wbg_fillRect_c38d5d56492a2368=function(e,t,r,i,a){e.fillRect(t,r,i,a)},n.wbg.__wbg_fill_34096e49d2aaa307=function(e){e.fill()},n.wbg.__wbg_getContext_e9cf379449413580=function(){return C(function(e,t,r){const i=e.getContext(S(t,r));return B(i)?0:L(i)},arguments)},n.wbg.__wbg_instanceof_CanvasRenderingContext2d_df82a4d3437bf1cc=function(e){let t;try{t=e instanceof CanvasRenderingContext2D}catch{t=!1}return t},n.wbg.__wbg_instanceof_HtmlCanvasElement_2ea67072a7624ac5=function(e){let t;try{t=e instanceof HTMLCanvasElement}catch{t=!1}return t},n.wbg.__wbg_instanceof_Window_def73ea0955fc569=function(e){let t;try{t=e instanceof Window}catch{t=!1}return t},n.wbg.__wbg_new_405e22f390576ce2=function(){return new Object},n.wbg.__wbg_new_6377da097a44ce6e=function(){return C(function(){return new Image},arguments)},n.wbg.__wbg_new_78feb108b6472713=function(){return new Array},n.wbg.__wbg_newnoargs_105ed471475aaf50=function(e,t){return new Function(S(e,t))},n.wbg.__wbg_newwithstrsequenceandoptions_aaff55b467c81b63=function(){return C(function(e,t){return new Blob(e,t)},arguments)},n.wbg.__wbg_of_2eaf5a02d443ef03=function(e){return Array.of(e)},n.wbg.__wbg_offsetLeft_0afdbda1fc3f098d=function(e){return e.offsetLeft},n.wbg.__wbg_offsetTop_de8d0722bd1b211d=function(e){return e.offsetTop},n.wbg.__wbg_pageX_ce146fc8b9d1c155=function(e){return e.pageX},n.wbg.__wbg_pageY_4d1412e9ba1fdcde=function(e){return e.pageY},n.wbg.__wbg_set_37837023f3d740e8=function(e,t,r){e[t>>>0]=r},n.wbg.__wbg_set_3f1d0b984ed272ed=function(e,t,r){e[t]=r},n.wbg.__wbg_setfillStyle_4f8f616d87dea4df=function(e,t){e.fillStyle=t},n.wbg.__wbg_setonload_264a0d330b7166fb=function(e,t){e.onload=t},n.wbg.__wbg_setsrc_c239193cc7ab0470=function(e,t,r){e.src=S(t,r)},n.wbg.__wbg_settype_39ed370d3edd403c=function(e,t,r){e.type=S(t,r)},n.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){const e=typeof global>"u"?null:global;return B(e)?0:L(e)},n.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){const e=typeof globalThis>"u"?null:globalThis;return B(e)?0:L(e)},n.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){const e=typeof self>"u"?null:self;return B(e)?0:L(e)},n.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){const e=typeof window>"u"?null:window;return B(e)?0:L(e)},n.wbg.__wbindgen_closure_wrapper130=function(e,t,r){return ge(e,t,22,Mn)},n.wbg.__wbindgen_closure_wrapper132=function(e,t,r){return ge(e,t,22,On)},n.wbg.__wbindgen_debug_string=function(e,t){const r=te(t),i=Y(r,_.__wbindgen_malloc,_.__wbindgen_realloc),a=N;P().setInt32(e+4*1,a,!0),P().setInt32(e+4*0,i,!0)},n.wbg.__wbindgen_init_externref_table=function(){const e=_.__wbindgen_export_2,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},n.wbg.__wbindgen_is_undefined=function(e){return e===void 0},n.wbg.__wbindgen_string_new=function(e,t){return S(e,t)},n.wbg.__wbindgen_throw=function(e,t){throw new Error(S(e,t))},n}function Nn(n,e){return _=n.exports,Ce.__wbindgen_wasm_module=e,I=null,G=null,_.__wbindgen_start(),_}async function Ce(n){if(_!==void 0)return _;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module_or_path:n}=n:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof n>"u"&&(n=new URL(""+new URL("../assets/libre_chess_web_backend_bg.B21mDyuR.wasm",import.meta.url).href,import.meta.url));const e=Dn();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await Bn(await n,e);return Nn(t,r)}var Wn=(n,e)=>e(n.currentTarget.value),kn=re("<option> </option>"),Fn=re('<select class="svelte-j1pv2h"></select>');function we(n,e){me(e,!0);function t(a){e.onChange(a)}var r=Fn();vn(r,()=>e.value);var i;r.__change=[Wn,t],ln(r,21,()=>e.options,fn,(a,o)=>{var s=kn(),u={},v=U(s,!0);D(s),ee(()=>{u!==(u=b(o).value)&&(s.value=(s.__value=b(o).value)??""),sn(v,b(o).label)}),Z(a,s)}),D(r),ee(()=>{i!==(i=e.value)&&(r.value=(r.__value=e.value)??"",ne(r,e.value)),q(r,"id",e.id),q(r,"name",e.id)}),Z(n,r),Se()}on(["change"]);var Un=re('<main class="svelte-1n7gp6r"><canvas class="svelte-1n7gp6r"></canvas> <div class="form svelte-1n7gp6r"><div class="field-container svelte-1n7gp6r"><label for="boardColor">Board Color</label> <!></div> <div class="field-container svelte-1n7gp6r"><label for="boardSet">Board Set</label> <!></div></div></main>');function Vn(n,e){me(e,!0);let t=M(!1),r=M(Q([])),i=M(Q([])),a=M(Q({board_color:"",board_set:"block"})),o=M(0),s=M(0),u;Le(()=>{b(t)||Ce().then(()=>{O(t,!0),u.getContext("2d")&&(Rn(()=>{O(a,An(),!0)}),xn(u),O(r,In(),!0),O(i,Ln(),!0),En(Math.min(b(o),b(s))))})});function v(l){Cn(l)}function c(l){Tn(l)}var p=Un(),f=U(p);an(f,l=>u=l,()=>u);var w=H(f,2),d=U(w),T=H(U(d),2);const h=z(()=>b(r).map(l=>({label:l.name,value:l.id}))),g=z(()=>{var l;return((l=b(a))==null?void 0:l.board_color)||""});we(T,{id:"boardColor",get options(){return b(h)},get value(){return b(g)},onChange:v}),D(d);var y=H(d,2),R=H(U(y),2);const E=z(()=>b(i).map(l=>({label:l.name,value:l.id}))),m=z(()=>{var l;return((l=b(a))==null?void 0:l.board_set)||""});we(R,{id:"boardColor",get options(){return b(E)},get value(){return b(m)},onChange:c}),D(y),D(w),D(p),ee((l,W,k)=>{q(f,"width",l),q(f,"height",W),wn(f,k)},[()=>Math.min(b(s),b(o)),()=>Math.min(b(s),b(o)),()=>`width: ${Math.min(b(s),b(o))}px; height: ${Math.min(b(s),b(o))}px;`]),le("innerWidth",l=>O(o,l,!0)),le("innerHeight",l=>O(s,l,!0)),Z(n,p),Se()}export{Vn as component};
